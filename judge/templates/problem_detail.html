{% extends 'base.html' %}
{% block title %}{{ problem.name }} – CodeVerse{% endblock %}

{% block content %}
<div class="mt-5">  {# Push content down from navbar #}

  <!-- 🔹 Problem Description Card -->
  <div class="problem-card mb-4">
    <div class="problem-card-title">🧠 {{ problem.name }}</div>
    <div class="problem-card-meta mb-2">
      Code: <code class="problem-code">{{ problem.code }}</code> |
      Difficulty:
      <span class="badge 
        {% if problem.difficulty == 'E' %}badge-easy
        {% elif problem.difficulty == 'M' %}badge-medium
        {% else %}badge-hard
        {% endif %}">
        {{ problem.get_difficulty_display }}
      </span>
    </div>

    <h5 class="mb-2">📝 Problem Statement</h5>
    <p style="white-space: pre-wrap;">{{ problem.statement }}</p>
  </div>

  <!-- 🔸 Code Submission Card -->
  <div class="problem-card">
    <div class="problem-card-title">🚀 Submit Your Code</div>
    <form id="submission-form" method="post">
      {% csrf_token %}
      <div class="mb-3">
        <label for="language" class="form-label">Language:</label>
        <select name="language" id="language" class="form-select w-auto d-inline-block ms-2" required>
          <option value="java">Java</option>
          <option value="python">Python</option>
          <option value="cpp">C++</option>
          <option value="c">C</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="code" class="form-label">Code:</label>
        <!-- 🔸 Monaco Editor container -->
        <div id="editor" style="height: 400px; width: 100%; border: 1px solid #1a75ff; border-radius: 0.5rem;"></div>

        <!-- 🔸 Hidden input to hold submitted code -->
        <textarea name="code" id="hidden-code" style="display:none;">{{ code|default:"" }}</textarea>
      </div>

      <button type="submit" class="btn-solve">Submit Code</button>
    </form>

    {% if verdict %}
      <div class="mt-3">
        <strong>🧾 Verdict:</strong> {{ verdict }}
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
